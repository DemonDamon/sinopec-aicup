# Research Report on Feature Engineering Strategy for Sinopec AI Innovation Competition


## 1. Executive Summary
This report outlines a comprehensive feature engineering strategy for the Sinopec AI Innovation Competition, focusing on oil and gas production prediction. Due to the unavailability of the specific `README.md` file, this strategy is synthesized from leading academic research and industry best practices in spatio-temporal data analysis, time series modeling, and reservoir engineering, with particular emphasis on the 'water drive' mechanism. Key areas include a detailed problem analysis covering spatio-temporal dynamics and data heterogeneity, a multi-faceted feature engineering plan for spatial, temporal, and event-based data, and strategies for data fusion. The proposed features leverage techniques such as equivalent well spacing density for spatial relations, lagged variables and rolling statistics for temporal dynamics, and event encoding for discrete operational changes. Critical to the solution is modeling the physical 'water drive' by linking injection and production well data through derived features that capture reservoir response.

## 2. Introduction
The accurate prediction of oil and gas production is a cornerstone of reservoir management and optimization within the petroleum industry. Challenges in this domain often stem from the complex spatio-temporal dependencies of well behaviors, the heterogeneous nature of geological and operational data, and the significant impact of discrete events like well perforations. The Sinopec AI Innovation Competition, aiming to address these very challenges, requires a robust feature engineering strategy to transform raw data into a format conducive for advanced predictive models. This report details such a strategy, drawing from recent scientific literature and practical applications to provide actionable insights for feature creation across spatial, temporal, and event-driven data dimensions, critically including methods to explicitly model the 'water drive' mechanism prevalent in many oil reservoirs.

## 3. Key Findings

### 3.1 In-depth Problem Analysis
The core challenges in predicting oil and gas production for the Sinopec competition stem from several interconnected factors:

*   **Spatio-Temporal Nature**: Oil production data is inherently spatio-temporal. The performance of a well is not only influenced by its past production (temporal aspect) but also by the activities and geological properties of surrounding wells (spatial aspect)[[ref]](https://www.nature.com/articles/s41598-025-91412-2)[[ref]](https://www.sciencedirect.com/science/article/abs/pii/S0920410520301212). The competition involves 54 wells, necessitating features that capture the influence and relationships between them over time. Changes in one well can propagate and affect others in its vicinity.
*   **Heterogeneity of Data Sources**: The raw data includes both static (e.g., reservoir geological properties like porosity, thickness, area, fluidity, original formation pressure) and dynamic (e.g., production time, liquid production, well spacing density) features[[ref]](https://journals.sagepub.com/doi/full/10.1177/01445987231188161). Furthermore, data may be provided at different time granularities (e.g., daily and monthly), requiring careful aggregation or disaggregation strategies to integrate into a unified model. This heterogeneity adds complexity in feature selection and model training.
*   **Significant Impact of Discrete Events**: Discrete operational events, such as well perforation (from `射孔数据表_well_perforation.csv`), represent abrupt structural changes in a well's production behavior. Traditional machine learning models struggle to accurately forecast oil production when such development measures change significantly[[ref]](https://journals.sagepub.com/doi/full/10.1177/01445987231188161). These events alter the well's connection to the reservoir and thus require specific feature engineering to capture their timing, magnitude, and lasting effects on production rates and water cut.

### 3.2 Comprehensive Feature Engineering Plan
A robust feature engineering plan is essential to translate raw data into meaningful predictors. The following outlines strategies across different feature categories:

a. **Spatial Features**
To quantify spatial relationships between the 54 wells, several concrete methods can be employed:
*   **Distance Calculations**: Calculate Euclidean distances (or geological distances, if available) between all pairs of wells. Specifically, for each production well, identify and quantify the distance to its nearest 1, 3, or 5 injection wells. Features can include `min_dist_to_inj_well`, `avg_dist_to_nearest_3_inj_wells`.
*   **Equivalent Well Spacing Density**: This crucial feature standardizes the impact of different well types (horizontal/vertical). As described in recent literature, horizontal wells can be converted into an equivalent number of vertical wells based on their total production and control area. This allows for the calculation of an `equivalent_well_spacing_density` (wells/km²) by dividing the total equivalent vertical wells by the reservoir area[[ref]](https://journals.sagepub.com/doi/full/10.1177/01445987231188161). Changes in this density are powerful indicators of spatial development measures.
*   **Graph-Based Features**: Represent the wells as nodes in a graph, with edges weighted by distance, geological connectivity, or fluid communication. Graph Convolutional Networks (GCNs) or Graph Neural Networks (GNNs) can directly learn features that capture complex topological relationships and fluid flow patterns between connected wells. Features could include node centrality measures or embeddings from these networks[[ref]](https://www.sciencedirect.com/science/article/abs/pii/S0920410520301212).
*   **Voronoi Diagrams**: Although not directly found as features in winning solutions from similar competitions (due to the black-box nature of final models), Voronoi diagrams can conceptualize

influence zones. While not direct features, they can inform features by identifying wells within a certain geological proximity that are likely to influence a given production well.

b. **Temporal Features**
Handling the time-series nature of production data requires advanced techniques to capture dynamic dependencies and trends:
*   **Lagged Variables**: Create features from previous time steps for key variables (e.g., `water_cut_lag_1_day`, `oil_production_lag_7_days`). This directly incorporates historical patterns and causal relationships within a single well's performance[[ref]](https://dotdata.com/blog/practical-guide-for-feature-engineering-of-time-series-data/). For monthly data, this would involve monthly lags.
*   **Rolling Window Statistics**: Calculate statistics over defined moving windows of past observations. Examples include `rolling_mean_30_days_oil_prod`, `rolling_std_90_days_water_cut`, `min_7_days_liquid_prod`, and `max_7_days_liquid_prod`[[ref]](https://dotdata.com/blog/practical-guide-for-feature-engineering-of-time-series-data/). These features capture short-to-medium term trends, volatility, and extremes.
*   **Exponential Moving Averages (EMA)**: EMAs give more weight to recent observations, making them responsive to recent changes while still considering older data. Features like `EMA_7_days_oil_prod` or `EMA_30_days_water_cut` can be highly effective in capturing underlying trends. 
*   **Time-Based Cyclical Features**: Extracting `year`, `month`, `day_of_week`, `day_of_year`, `quarter`, etc., can capture seasonal and cyclical patterns that might influence production, which are critical for time series modeling[[ref]](https://dotdata.com/blog/practical-guide-for-feature-engineering-of-time-series-data/).

c. **Event-Based Features**
Discrete events, such as perforations from `射孔数据表_well_perforation.csv`, fundamentally alter a well's production behavior and must be encoded effectively:
*   **Binary Flags**: A simple `is_perforated` (boolean) feature indicating if a well has undergone perforation.
*   **Time Since Last Event**: Calculate `days_since_last_perforation` or `months_since_last_perforation`. This captures the temporal proximity of the event, which is likely to have a strong impact on recent production. 
*   **Cumulative Event Count**: `total_perforations` for a given well up to a specific date. This might capture the accumulated impact of such interventions.
*   **Event Magnitude/Type (if available)**: If the perforation data includes details on the extent or type of perforation, this can be encoded as categorical or numerical features.
*   **Production Shift Features**: Create features that measure the *change* in production or water cut immediately pre- and post-perforation (e.g., `oil_prod_change_post_perf`, `water_cut_change_post_perf`). This attempts to quantify the direct impact of the event.

d. **Data Fusion Strategy**
Merging daily and monthly data streams requires a clear methodology to maintain data integrity and consistency:
*   **Aggregation (Daily to Monthly)**: For daily data, aggregate relevant features (e.g., total oil production, average water cut, min/max liquid production) to a monthly granularity to match monthly data. This creates consistent time steps across all features[[ref]](https://journals.sagepub.com/doi/full/10.1177/01445987231188161). Examples: `monthly_sum_oil`, `monthly_avg_water_cut`, `monthly_std_liquid_prod`.
*   **Interpolation/Forward Fill (Monthly to Daily)**: For monthly static or slowly changing features, interpolate or forward-fill values to a daily granularity. Care must be taken to ensure this doesn't introduce unrealistic variability. For example, monthly reservoir parameters can be constant across the month, then updated for the next. This would apply to `equivalent_well_spacing_density` calculated monthly but needed for daily predictions.
*   **Hierarchical Features**: Create features at both daily and monthly levels, and allow the model (e.g., deep learning models like Seq2Seq-LSTM or CNN-LSTM) to learn the relationships across these granularities[[ref]](https://journals.sagepub.com/doi/full/10.1177/01445987231188161)[[ref]](https://www.sciencedirect.com/science/article/abs/pii/S0360544223020959). The explicit handling of different time granularities is vital.

### 3.3 Modeling the 'Water Drive' Mechanism
The 'water drive' mechanism is a critical physical process where water from an underlying or adjacent aquifer encroaches into the oil reservoir to displace hydrocarbons, providing natural pressure support and enhancing oil recovery. Effectively modeling this requires features that capture the dynamic interplay between water injection (from `单井水井日度数据_daily_water.csv`) and its effect on the water cut of production wells (in `单井油井日井度数据train_daily_oil.csv`).

*   **Physical Basis**: In a water drive system, as oil and gas are produced, the connected aquifer expands, pushing water into the pore spaces to replace the extracted fluids. This process helps maintain reservoir pressure, but also leads to increased water production (water cut) over time in oil wells[[ref]](https://www.slb.com/resource-library/oilfield-review/defining-series/defining-reservoir-drive-mechanisms)[[ref]](http://wiki.aapg.org/Drive_mechanisms_and_recovery).
*   **Key Features for Modeling Water Drive**: 
    *   **Proximity to Injection Wells**: Features based on the distance between production wells and active injection wells. This could be a static feature like `min_dist_to_active_inj_well` or `average_dist_to_top_k_inj_wells`.
    *   **Cumulative Water Injection**: For each production well, track the cumulative water injected by its nearest or most influential injection wells. This can be `cumulative_water_inj_nearest_inj_well`.
    *   **Lagged Water Injection Rates**: Include lagged daily or monthly water injection rates from nearby injection wells to capture the time delay of water migration and its impact on production well water cut. For example, `inj_rate_lag_X_days_nearest_inj`.
    *   **Water Injection / Oil Production Ratio (WOR)**: Ratios of total injected water to total oil produced in a specific region or well cluster can serve as an indicator of the water drive efficiency and its progression. This might involve spatially aggregating injection and production data before computing the ratio.
    *   **Pressure Data (if available/derivable)**: Reservoir pressure is a direct indicator of water drive. Even if not directly provided, features that infer pressure changes based on injection/production could be highly valuable.
    *   **Reservoir Response Time**: A feature attempting to quantify the time it takes for injected water to reach and affect a production well. This might be a function of inter-well distance and reservoir permeability. 
*   **Modeling Approach**: Deep learning models, especially those capable of handling spatio-temporal relationships like Seq2Seq-LSTM or CNN-LSTM-SA, are well-suited to learn the complex, non-linear dependencies between injection well activities and production well responses in a water drive scenario[[ref]](https://journals.sagepub.com/doi/full/10.1177/01445987231188161)[[ref]](https://www.sciencedirect.com/science/article/abs/pii/S0360544223020959). The Sage Journals paper explicitly models systems where oil production is influenced by liquid production (including water) and well spacing, which are proxies for the effectiveness of the water drive mechanism. The model demonstrates that increases in liquid production (implying more water movement due to water drive) or changes in well spacing density lead to predictable changes in oil production, effectively capturing the physical response of a water-driven reservoir.

## 4. Conclusion
This research provides a robust framework for feature engineering tailored to the Sinopec AI Innovation Competition, despite the absence of the explicit `README.md`. The challenges of spatio-temporal data, heterogeneous sources, and discrete events are addressed through a detailed plan encompassing spatial, temporal, and event-based feature creation, alongside a data fusion strategy. Central to this approach is the sophisticated modeling of the 'water drive' mechanism, emphasizing features that capture the dynamic interactions between injection and production. By carefully implementing advanced techniques such as equivalent well spacing density, lagged variables, rolling statistics, and encoding perforation events, coupled with spatio-temporal deep learning architectures like Seq2Seq-LSTM, a highly accurate and interpretable predictive model for oil and gas production can be developed. The actionable insights derived from this feature engineering strategy will be crucial for achieving high predictive performance and optimizing reservoir management within the competition.

## 5. References
1.  https://www.nature.com/articles/s41598-025-91412-2
2.  https://www.sciencedirect.com/science/article/abs/pii/S0920410520301212
3.  https://journals.sagepub.com/doi/full/10.1177/01445987231188161
4.  https://dotdata.com/blog/practical-guide-for-feature-engineering-of-time-series-data/
5.  https://www.slb.com/resource-library/oilfield-review/defining-series/defining-reservoir-drive-mechanisms
6.  http://wiki.aapg.org/Drive_mechanisms_and_recovery
7.  https://www.sciencedirect.com/science/article/abs/pii/S0360544223020959